<!-- Modern Deck Selector - Dynamic Loading -->
<script type="module" src="/scripts/deck-selector-dynamic.mjs"></script>

<div class="deck-selector-container">
    <div class="deck-selector-header">
        <input type="text"
               class="deck-search-input"
               placeholder="Search decks..."
               id="deckSearch">
        <button class="deck-search-clear" id="deckSearchClear">âœ•</button>
    </div>

    <div class="deck-categories">
        <button class="category-tab active" data-category="all">All</button>
        <button class="category-tab" data-category="Main">Main</button>
        <button class="category-tab" data-category="Legacy">Legacy</button>
        <button class="category-tab" data-category="Classic">Classic</button>
        <button class="category-tab" data-category="Limited">Limited</button>
    </div>

    <div class="deck-list-container" id="deckListContainer">
        <!-- Loading State -->
        <div class="deck-loading" style="padding: 40px; text-align: center; color: var(--text-muted);">
            <div style="font-size: 2rem; margin-bottom: 12px;">ðŸŽ´</div>
            <div>Loading decks...</div>
        </div>

        <!-- Decks will be populated dynamically by deck-selector-dynamic.mjs -->
        <div class="deck-selector-grid">
            <!-- Dynamic content loads here -->
        </div>
    </div>

    <!-- Hidden form field for compatibility -->
    <form name="formDecks" style="display: none;">
        <select name="selectDeck" id="hiddenDeckSelect">
            <option value="">Loading...</option>
        </select>
    </form>
</div>

<!-- Deck Selector Script -->
<script type="module">
    import { initDeckSelector, getSelectedDeck } from '/scripts/deck-selector.mjs';

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            // Small delay to ensure all elements are rendered
            setTimeout(initDeckSelector, 100);
        });
    } else {
        setTimeout(initDeckSelector, 100);
    }

    // Make functions available globally for compatibility
    window.getSelectedDeck = getSelectedDeck;
</script>
